@model Models.Pedido
@{
    ViewBag.Title = "Escolher forma de pagamento";
    ViewBag.Description = "Aqui e aonde voce ira escolher a forma de pagamento do pedido.";
    ViewBag.Keywords = "AIO Pratas, Pagamento, Finalizar, Compra, Pedido, Pagar, Forma, Pagamento";
}
<style>
    label {
        font-family: Poppins-Regular;
    }

    .txtValues {
        color: #717fe0;
    }

    .cadInput {
        width: 100%;
        padding-left: 17px;
    }
</style>
<div class="bg0 p-t-75 p-b-85">
    <div class="container">
        <div class="flex-w flex-tr" style="justify-content: center;">
            <div class="size-210 bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md" style="padding: 22px;">
                <h4 class="mtext-105 cl2 txt-center p-b-30">Pagamento</h4>
                <label style="padding-bottom: 7px;">Qual forma de pagamento ?</label>
                <div style="display:flex">
                    <input type="radio" name="formaPagamento" style="zoom: 1.5; margin-right: 5px;" id="cartaoCredito" checked onclick="$('#divCartao').fadeIn()" title="Cartão de Crédito" />
                    <label for="cartaoCredito" style="margin-right: 21px;font-family: Poppins-Regular;color: #9e9e9e;" title="Cartão de Crédito">Cartão de Crédito</label>
                    <input type="radio" name="formaPagamento" style="zoom: 1.5; margin-right: 5px;" id="boleto" onclick="$('#divCartao').fadeOut()" title="Boleto" />
                    <label for="boleto" style="font-family: Poppins-Regular;color: #9e9e9e;" title="Boleto">Boleto</label>
                </div>
                <br />
                <div id="divCartao">
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" id="nome" placeholder="Nome do Cartão" maxlength="65" style="padding-left: 22px;">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" id="numero" placeholder="Número Do Cartão" maxlength="50" style="padding-left: 22px;">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent" style="width: 82px;">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" id="cvc" placeholder="CVC" style="padding-left: 22px;text-align: center;">
                    </div>
                    <fieldset class="col s12" style="border:1px solid #e6e6e6;padding-bottom: 20px;padding-right: 0; border-radius: 4px;">
                        <legend style="width: initial;">Vencimento</legend>
                        <table>
                            <tbody>
                                <tr>
                                    <td>
                                        <div>
                                            <label for="mes">Mês</label>
                                            <input type="text" class="form-control" id="mes" maxlength="2" autocomplete="off" style="width: 80%;">
                                        </div>
                                    </td>
                                    <td>
                                        <div>
                                            <label for="ano">Ano</label>
                                            <input type="text" class="form-control" id="ano" maxlength="2" autocomplete="off" style="width: 80%;">
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </fieldset>
                    <br />
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" id="dataNascimento" placeholder="Data de Nascimento" maxlength="50" style="padding-left: 22px;">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent" style="margin-bottom:0">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" id="cpf" placeholder="CPF do Titular do Cartão" maxlength="50" style="padding-left: 22px;">
                    </div>
                    <br />
                    <label>Parcelas</label>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <select id="parcelas" class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" style="border: none;">
                            <option value="1" selected>1x</option>
                            <option value="2">2x</option>
                            <option value="3">3x</option>
                            <option value="4">4x</option>
                            <option value="5">5x</option>
                            <option value="6">6x</option>
                        </select>
                    </div>
                    <br />
                </div>
            </div>
            <div class="size-210 bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md" style="padding: 13px;">
                <fieldset class="col s12" style="border:1px solid #e6e6e6;padding-bottom: 20px;padding-right: 0; border-radius: 4px;">
                    <legend style="width: initial;">Endereço da Cobrança</legend>
                    <div id="divEndereco">
                        <span id="endereco"></span>
                        <br>
                        <span style="color: #007bff; cursor: pointer; text-decoration: underline;" onclick="$('#divEndereco').fadeOut(0);$('#divAlterarEndereco').fadeIn();" title="Mudar o Endereço">Mudar o Endereço</span>
                    </div>
                    <div id="divAlterarEndereco" style="display:none">
                        <div class="flex-w flex-t p-t-15 p-b-30" style="width: 100%;justify-content: center;display:block;padding: 31px 39px 15px 20px;">
                            <div class="bor8 m-b-20 how-pos4-parent">
                                <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="CEP" placeholder="CEP" onblur="CarregarCEP($(this).val().toString())">
                            </div>
                            <div class="bor8 m-b-20 how-pos4-parent">
                                <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="Logradouro" placeholder="Endereço" maxlength="100">
                            </div>
                            <div class="bor8 m-b-20 how-pos4-parent">
                                <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="Numero" placeholder="Número" maxlength="10">
                            </div>
                            <div class="bor8 m-b-20 how-pos4-parent">
                                <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="Complemento" placeholder="Complemento" maxlength="50">
                            </div>
                            <div class="bor8 m-b-20 how-pos4-parent">
                                <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="Bairro" placeholder="Bairro" maxlength="45">
                            </div>
                            <div class="bor8 m-b-20 how-pos4-parent">
                                <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="Cidade" placeholder="Cidade" maxlength="32">
                            </div>
                            <div class="bor8 m-b-20 how-pos4-parent">
                                <select name="UF" class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" style="border: none;">
                                    <option value="0" selected>Estado</option>
                                    <option value="AC">Acre</option>
                                    <option value="AL">Alagoas</option>
                                    <option value="AP">Amapá</option>
                                    <option value="AM">Amazonas</option>
                                    <option value="BA">Bahia</option>
                                    <option value="CE">Ceará</option>
                                    <option value="DF">Distrito Federal</option>
                                    <option value="ES">Espírito Santo</option>
                                    <option value="GO">Goiás</option>
                                    <option value="MA">Maranhão</option>
                                    <option value="MT">Mato Grosso</option>
                                    <option value="MS">Mato Grosso do Sul</option>
                                    <option value="MG">Minas Gerais</option>
                                    <option value="PA">Pará</option>
                                    <option value="PB">Paraíba</option>
                                    <option value="PR">Paraná</option>
                                    <option value="PE">Pernambuco</option>
                                    <option value="PI">Piauí</option>
                                    <option value="RJ">Rio de Janeiro</option>
                                    <option value="RN">Rio Grande do Norte</option>
                                    <option value="RS">Rio Grande do Sul</option>
                                    <option value="RO">Rondônia</option>
                                    <option value="RR">Roraima</option>
                                    <option value="SC">Santa Catarina</option>
                                    <option value="SP">São Paulo</option>
                                    <option value="SE">Sergipe</option>
                                    <option value="TO">Tocantins</option>
                                    <option value="EX">Estrangeiro</option>
                                </select>
                            </div>
                            <div style="display: flex;width: 100%;justify-content: center;">
                                <button class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer" style="width: 125px;" onclick="SalvarEndereco()" title="Salvar">
                                    Salvar
                                    <i class="fa fa-spinner fa-spin" style="margin-left: 5px;display:none;" id="iconBtnSalvar"></i>
                                </button>
                            </div>
                            <p style="width: 100%;text-decoration: underline;cursor: pointer;text-align: center;margin-top: 11px;" onclick="$('#divAlterarEndereco').fadeOut(0);$('#divEndereco').fadeIn();UpScroll()" title="Voltar">Voltar</p>
                        </div>
                    </div>
                </fieldset>
                <br />
                <fieldset class="col s12" style="border:1px solid #e6e6e6;padding-bottom: 20px;padding-right: 0; border-radius: 4px;">
                    <legend style="width: initial;">Produtos</legend>
                    <table style="width: 100%;">
                        @foreach (var item in Model.ItensPedido)
                        {
                            <tr>
                                <td style="vertical-align: middle; text-align: center;border:none;width: 80px;min-width: 80px;">
                                    <a href="/Produto/@item.Produto.Nome.Replace(' ', '-')"><img src="@item.Produto.UrlImgA" width="80" height="80" alt="@item.Produto.Nome" title="@item.Produto.Nome" style="margin: 7px 0;" /></a>
                                </td>
                                <td style="border:none; padding-left:15px;vertical-align:middle">
                                    <a href="/Produto/@item.Produto.Nome.Replace(' ', '-')" title="@item.Produto.Nome"><small class="txtValues">@item.Produto.Nome</small></a><br />
                                    <small>Quantidade: <span class="txtValues">@item.Quantidade<span>x</span></span></small><br />
                                    <small class="txtValues">R$ @item.Produto.Valor.ToString().Replace(".", ",")</small><br />
                                    @if (!string.IsNullOrWhiteSpace(item.Observacao))
                                    {
                                        <small>Observações: <span class="txtValues">@item.Observacao</span></small>
                                    }
                                </td>
                            </tr>
                        }
                    </table>
                </fieldset>
                <br />
                <div class="flex-w flex-t p-b-13" id="divSubtotal" style="padding-top: 16px;margin: 0 9px;">
                    <div class="size-208">
                        <span class="stext-110 cl2">
                            Subtotal:
                        </span>
                    </div>
                    <div class="size-209">
                        <span class="mtext-110 cl2">
                            @{
                                decimal subTotal = 0;
                                Model.ItensPedido.ForEach(x =>
                                {
                                    subTotal += (x.Quantidade * x.Produto.Valor);
                                });
                                subTotal = Math.Round(subTotal, 2);
                            }
                            R$ @subTotal.ToString().Replace('.', ',')
                        </span>
                    </div>
                </div>
                <div class="flex-w flex-t p-b-13 bor12" id="divFrete" style="margin: 0 9px;">
                    <div class="size-208">
                        <span class="stext-110 cl2">
                            Frete:
                        </span>
                    </div>
                    <div class="size-209">
                        <span class="mtext-110 cl2">
                            @if (Model.ValorFrete > 0)
                            {
                                <text>R$ @Model.ValorFrete.ToString().Replace('.', ',')</text>
                            }
                            else
                            {
                                <span style="color:green">GRÁTIS</span>
                            }
                        </span>
                    </div>
                </div>
                @if (Model.Cupom != null)
                {
                    if (Model.Cupom.CodCupom > 0)
                    {
                        <script>
                            removerCSSBordaFrete = true;
                        </script>
                        <div class="flex-w flex-t p-b-13 bor12" style="margin: 0 9px;">
                            <div class="size-208">
                                <span class="stext-110 cl2">
                                    Desconto:
                                </span>
                            </div>
                            <div class="size-209">
                                <span class="mtext-110 cl2">
                                    R$ @Model.Cupom.Valor.ToString().Replace('.', ',')
                                </span>
                            </div>
                        </div>
                    }
                }
                <div class="flex-w flex-t p-t-27 p-b-33" style="padding-top: 35px;margin: 0 9px;">
                    <div class="size-208">
                        <span class="mtext-101 cl2">
                            Total:
                        </span>
                    </div>
                    <div class="size-209 p-t-1">
                        <span class="mtext-110 cl2">
                            R$ @Model.ValorTotal.ToString().Replace('.', ',')
                        </span>
                    </div>
                </div>
                <div style="width: 100%;display: flex;justify-content: center;">
                    <button class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer" onclick="FinalizarPagamento()" style="width: 200px;float:right" title="Finalizar Compra">
                        Finalizar Compra
                        <i class="fa fa-spinner fa-spin" style="margin-left: 5px;display:none;" id="iconBtnFinalizar"></i>
                    </button>
                </div>
                <div style="text-align:center;padding-top:2px">
                    <small>Declaro que li e estou ciente de todos os <a href="/Pagamento/Contrato" target="_blank" title="Termos e Condições">Termos e Condições</a></small>
                </div>
            </div>
        </div>
    </div>
</div>
<input type="hidden" id="public_key" value="@Servicos.Util.EncodeBase64(Servicos.Util.Producao ? System.Configuration.ConfigurationManager.AppSettings["ChavePublicaProd"].ToString() : System.Configuration.ConfigurationManager.AppSettings["ChavePublicaDev"].ToString())" />
<input type="hidden" id="codPedidoCripto" value="@Model.CodPedidoCripto" />
<input type="hidden" id="idWirecardPedidoCripto" value="@Model.IdWirecardCripto" />
@section scripts{
    <script src="~/Scripts/moip.min.js"></script>
    <script src="~/Scripts/Pagamento.min.js"></script>
}