@model Models.Usuario
@{
    ViewBag.Title = "Minha Conta";
    ViewBag.Description = "Em Minha Conta o usuario podera editar todas suas informacoes preenchidas no cadastro como nome, cpf, data de nascimento, endereços de entrega e cobranca e alteracao de senha.";
    ViewBag.Keywords = "AIO Pratas, Cadastro, Conta, Editar, Usuario, Login, Senha, Endereco, Entrega, Senha, Minha, Conta";
}
<style>
    .cadInput {
        padding: 0 19px;
        font-size: 16px;
    }
        .cadInput::-webkit-input-placeholder {
            color: rgba(62, 62, 62, 0.6313725490196078) !important;
        }
    label {
        margin-bottom: 0px !important;
    }
    .bor8 {
        margin-bottom: 11px !important;
    }
</style>
<div class="wrapper d-flex align-items-stretch">
    @Html.Partial("~/Views/Shared/_Side.cshtml")
    <div id="content" class="p-4 p-md-5 pt-5">
        <br />
        <div class="container">
            <div class="flex-w flex-tr" style="justify-content: center;" id="divConta">
                <div class="size-210 bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md" style="padding-top: 38px;padding-bottom: 38px;">
                    <h4 class="mtext-105 cl2 txt-center p-b-30">
                        Dados Pessoais
                    </h4>
                    <label>Nome</label>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="Nome" placeholder="Nome" maxlength="40" value="@Model.Nome">
                    </div>
                    <label>Sobrenome</label>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="Sobrenome" placeholder="Sobrenome" maxlength="49" value="@Model.Sobrenome">
                    </div>
                    <label>Data de Nascimento</label>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="DataNascimento" placeholder="Data de Nascimento" value="@Model.DataNascimento.ToString("dd/MM/yyyy")">
                    </div>
                    <label>CPF</label>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="CPF" placeholder="CPF" maxlength="11" value="@Model.CPF">
                    </div>
                    <label>Telefone</label>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="Telefone" placeholder="Telefone" value="@Model.Telefone">
                    </div>
                </div>
                <div class="size-210 bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md" style="padding-top: 38px;padding-bottom: 38px;">
                    <h4 class="mtext-105 cl2 txt-center p-b-30">
                        Endereços
                    </h4>
                    <div class="row">
                        <div class="col-12">
                            <div style="border: 1px solid #c8c8c8;width: 100%;padding: 18px;border-radius: 3px;cursor:pointer;background: #212121;color: #ffffff;border-radius: 4px;display: inline-flex;" onclick="EvCollapse('collapse1')">
                                <i class="fa fa-sort-desc fa-2x" style="margin-top: -4px; padding-right: 15px; float: right;"></i>
                                <span style="color: #ffffff; font-size: large">Endereço para Entregas</span>
                            </div>
                            <div id="collapse1" style="padding-top: 15px;border-bottom: 1px solid #c8c8c8;border-right: 1px solid #c8c8c8;border-left: 1px solid #c8c8c8;padding: 18px;display:none">
                                <div>
                                    <label>CEP</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="CEP" placeholder="CEP" maxlength="8" onblur="CarregarCEP($(this).val().toString())" value="@Model.CEP">
                                    </div>
                                    <label>Logradouro</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="Logradouro" placeholder="Endereço" maxlength="100" value="@Model.Logradouro">
                                    </div>
                                    <label>Número</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="Numero" placeholder="Número" maxlength="10" value="@Model.Numero">
                                    </div>
                                    <label>Complemento</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="Complemento" placeholder="Complemento" maxlength="50" value="@Model.Complemento">
                                    </div>
                                    <label>Bairro</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="Bairro" placeholder="Bairro" maxlength="45" value="@Model.Bairro">
                                    </div>
                                    <label>Cidade</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="Cidade" placeholder="Cidade" maxlength="32" value="@Model.Cidade">
                                    </div>
                                    <label>Estado</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <select name="UF" class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" style="border: none;">
                                            <option value="0" selected>Estado</option>
                                            <option value="AC">Acre</option>
                                            <option value="AL">Alagoas</option>
                                            <option value="AP">Amapá</option>
                                            <option value="AM">Amazonas</option>
                                            <option value="BA">Bahia</option>
                                            <option value="CE">Ceará</option>
                                            <option value="DF">Distrito Federal</option>
                                            <option value="ES">Espírito Santo</option>
                                            <option value="GO">Goiás</option>
                                            <option value="MA">Maranhão</option>
                                            <option value="MT">Mato Grosso</option>
                                            <option value="MS">Mato Grosso do Sul</option>
                                            <option value="MG">Minas Gerais</option>
                                            <option value="PA">Pará</option>
                                            <option value="PB">Paraíba</option>
                                            <option value="PR">Paraná</option>
                                            <option value="PE">Pernambuco</option>
                                            <option value="PI">Piauí</option>
                                            <option value="RJ">Rio de Janeiro</option>
                                            <option value="RN">Rio Grande do Norte</option>
                                            <option value="RS">Rio Grande do Sul</option>
                                            <option value="RO">Rondônia</option>
                                            <option value="RR">Roraima</option>
                                            <option value="SC">Santa Catarina</option>
                                            <option value="SP">São Paulo</option>
                                            <option value="SE">Sergipe</option>
                                            <option value="TO">Tocantins</option>
                                            <option value="EX">Estrangeiro</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <br />
                            <div style="border: 1px solid #c8c8c8;width: 100%;padding: 18px;border-radius: 3px;cursor:pointer;background: #212121;color: #ffffff;border-radius: 4px;display: inline-flex;" onclick="EvCollapse('collapse2')">
                                <i class="fa fa-sort-desc fa-2x" style="margin-top: -4px; padding-right: 15px; float: right;"></i>
                                <span style="color: #ffffff; font-size: large">Endereço de Cobrança</span>
                            </div>
                            <div id="collapse2" style="padding-top: 15px;border-bottom: 1px solid #c8c8c8;border-right: 1px solid #c8c8c8;border-left: 1px solid #c8c8c8;padding: 18px;display:none">
                                <div>
                                    <label>CEP</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="endCobCEP" placeholder="CEP" maxlength="8" onblur="CarregarCEPEndCobranca($(this).val().toString())" value="@Model.EnderecoCobranca.CEP">
                                    </div>
                                    <label>Logradouro</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="endCobLogradouro" placeholder="Endereço" maxlength="100" value="@Model.EnderecoCobranca.Logradouro">
                                    </div>
                                    <label>Número</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="endCobNumero" placeholder="Número" maxlength="10" value="@Model.EnderecoCobranca.Numero">
                                    </div>
                                    <label>Complemento</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" type="text" name="endCobComplemento" placeholder="Complemento" maxlength="50" value="@Model.EnderecoCobranca.Complemento">
                                    </div>
                                    <label>Bairro</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="endCobBairro" placeholder="Bairro" maxlength="45" value="@Model.EnderecoCobranca.Bairro">
                                    </div>
                                    <label>Cidade</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput textTransformCapitalize" type="text" name="endCobCidade" placeholder="Cidade" maxlength="32" value="@Model.EnderecoCobranca.Cidade">
                                    </div>
                                    <label>Estado</label>
                                    <div class="bor8 m-b-20 how-pos4-parent">
                                        <select name="endCobUF" class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput" style="border: none;">
                                            <option value="0" selected>Estado</option>
                                            <option value="AC">Acre</option>
                                            <option value="AL">Alagoas</option>
                                            <option value="AP">Amapá</option>
                                            <option value="AM">Amazonas</option>
                                            <option value="BA">Bahia</option>
                                            <option value="CE">Ceará</option>
                                            <option value="DF">Distrito Federal</option>
                                            <option value="ES">Espírito Santo</option>
                                            <option value="GO">Goiás</option>
                                            <option value="MA">Maranhão</option>
                                            <option value="MT">Mato Grosso</option>
                                            <option value="MS">Mato Grosso do Sul</option>
                                            <option value="MG">Minas Gerais</option>
                                            <option value="PA">Pará</option>
                                            <option value="PB">Paraíba</option>
                                            <option value="PR">Paraná</option>
                                            <option value="PE">Pernambuco</option>
                                            <option value="PI">Piauí</option>
                                            <option value="RJ">Rio de Janeiro</option>
                                            <option value="RN">Rio Grande do Norte</option>
                                            <option value="RS">Rio Grande do Sul</option>
                                            <option value="RO">Rondônia</option>
                                            <option value="RR">Roraima</option>
                                            <option value="SC">Santa Catarina</option>
                                            <option value="SP">São Paulo</option>
                                            <option value="SE">Sergipe</option>
                                            <option value="TO">Tocantins</option>
                                            <option value="EX">Estrangeiro</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="size-110" style="min-height:0;display: contents;">
                    <button class="flex-c-m stext-101 cl0 size-121 bg3 bor1 hov-btn3 p-lr-15 trans-04 pointer" onclick="Salvar()" id="btnSalvarA" style="margin-top: 13px;width: 130px;" title="Salvar">
                        Salvar
                        <i class="fa fa-spinner fa-spin" style="margin-left: 5px;display:none;" id="btnSalvar"></i>
                    </button>
                </div>
                <div class="size-110" style="min-height:0">
                    <p style="text-align:center; margin-top:15px;margin-bottom: 0; text-decoration:underline; cursor:pointer" onclick="$('#divConta').fadeOut(0); $('#divSeguranca').fadeIn(); UpScroll(); $('.clearInput').val('')" title="Alterar minha Senha">
                        Alterar minha Senha
                    </p>
                </div>
            </div>
            <br />
            <div class="flex-w flex-tr" style="justify-content: center;display:none" id="divSeguranca">
                <div class="size-110 bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md" style="padding-top: 38px;padding-bottom: 38px;">
                    <h4 class="mtext-105 cl2 txt-center p-b-30">
                        Segurança
                    </h4>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput clearInput" type="password" name="SenhaAtual" placeholder="Digite a sua Senha atual" maxlength="20">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput clearInput" type="password" name="NovaSenha" placeholder="Digite a sua nova Senha" maxlength="20">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30 cadInput clearInput" type="password" name="RepNovaSenha" placeholder="Repita a sua nova Senha" maxlength="20">
                    </div>
                    <div class="size-110" style="min-height:0;display: flex;justify-content: center;">
                        <button class="flex-c-m stext-101 cl0 size-121 bg3 bor1 hov-btn3 p-lr-15 trans-04 pointer" onclick="SalvarNovaSenha()" id="btnSalvarNovaSenhaA" style="margin-top: 3px;width: 130px;" title="Salvar">
                            Salvar
                            <i class="fa fa-spinner fa-spin" style="margin-left: 5px;display:none;" id="btnSalvarNovaSenha"></i>
                        </button>
                    </div>
                    <div class="size-110" style="min-height:0">
                        <p style="text-align:center; margin-top:15px;margin-bottom: 0; text-decoration:underline; cursor:pointer" onclick="$('#divSeguranca').fadeOut(0); $('#divConta').fadeIn(); UpScroll()" title="Retornar">
                            Retornar
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section scripts{
    <script>
        $(() => {
            CarregarRegrasMask();
            $('input[name="Cidade"]').keypress(function (e) {
                if (e.keyCode == 13)
                    $('#btnSalvarA').click();
            });
            $('select[name="UF"]').val('@Model.UF');
            $('select[name="endCobUF"]').val('@Model.EnderecoCobranca.UF');
            $('#liMinhaConta').addClass('active');
        });
        function CarregarRegrasMask() {
            if ($('input[name="Telefone"]').val().length == 15)
                $('input[name="Telefone"]').mask('(00) 00000-0009');
            else
                $('input[name="Telefone"]').mask('(00) 0000-00009');

            $('input[name="Telefone"]').blur(function () {
                if ($(this).val().length == 15)
                    $('input[name="Telefone"]').mask('(00) 00000-0009');
                else
                    $('input[name="Telefone"]').mask('(00) 0000-00009');
            });
            $('input[name="DataNascimento"]').mask('00/00/0000');
            $('input[name="CPF"]').mask('00000000000');
            $('input[name="CEP"]').mask('000000000');
            $('input[name="endCobCEP"]').mask('000000000');
        }
        function CarregarCEP(cep) {
            if (cep.length > 0) {
                $.ajax({
                    type: 'GET',
                    url: 'https://viacep.com.br/ws/' + cep + '/json/',
                    success: function (r) {
                        if (JSON.stringify(r).indexOf("cep") > 0) {
                            $('input[name="Logradouro"]').val(r.logradouro);
                            $('input[name="Complemento"]').val(r.complemento);
                            $('input[name="Bairro"]').val(r.bairro);
                            $('input[name="Cidade"]').val(r.localidade);
                            $('select[name="UF"]').val(r.uf);
                        }
                    },
                    error: function (e) {
                        console.log(e);
                    }
                });
            }
        }
        function CarregarCEPEndCobranca(cep) {
            if (cep.length > 0) {
                $.ajax({
                    type: 'GET',
                    url: 'https://viacep.com.br/ws/' + cep + '/json/',
                    success: function (r) {
                        if (JSON.stringify(r).indexOf("cep") > 0) {
                            $('input[name="endCobLogradouro"]').val(r.logradouro);
                            $('input[name="endCobComplemento"]').val(r.complemento);
                            $('input[name="endCobBairro"]').val(r.bairro);
                            $('input[name="endCobCidade"]').val(r.localidade);
                            $('select[name="endCobUF"]').val(r.uf);
                        }
                    },
                    error: function (e) {
                        console.log(e);
                    }
                });
            }
        }
        function Salvar() {
            $('#btnSalvar').fadeIn(0);
            if (ValidarCad()) {
                var usuario = {
                    CodUsuario: '@Model.CodUsuario',
                    CodPessoa: '@Model.CodPessoa',
                    CodEndereco: '@Model.CodEndereco',
                    Nome: $("input[name='Nome']").val(),
                    Sobrenome: $("input[name='Sobrenome']").val(),
                    DataNascimento: $("input[name='DataNascimento']").val(),
                    CPF: $("input[name='CPF']").val(),
                    Telefone: $("input[name='Telefone']").val(),
                    CEP: $("input[name='CEP']").val().trim(),
                    Logradouro: $("input[name='Logradouro']").val(),
                    Numero: $("input[name='Numero']").val(),
                    Complemento: $("input[name='Complemento']").val(),
                    Bairro: $("input[name='Bairro']").val(),
                    Cidade: $("input[name='Cidade']").val(),
                    UF: $("select[name='UF']").val(),
                    CodEnderecoCobranca: '@Model.CodEnderecoCobranca',
                    EnderecoCobranca: {
                        CodEndereco: '@Model.CodEnderecoCobranca',
                        CEP: $("input[name='endCobCEP']").val().trim(),
                        Logradouro: $("input[name='endCobLogradouro']").val(),
                        Numero: $("input[name='endCobNumero']").val(),
                        Complemento: $("input[name='endCobComplemento']").val(),
                        Bairro: $("input[name='endCobBairro']").val(),
                        Cidade: $("input[name='endCobCidade']").val(),
                        UF: $("select[name='endCobUF']").val()
                    }
                };
                $.ajax({
                    type: 'POST',
                    url: '/Usuario/SalvarUsuario',
                    data: usuario,
                    success: function (r) {
                        if (r.sucesso) {
                            if (getCookie('aiopnome') != null)
                                $('.spanNomeTop').text('Olá ' + getCookie('aiopnome'));
                            swal("Alterações realizadas", "Usuário atualizado com sucesso.", "success");
                        }
                        else
                            swal("Atenção", r.mensagem, "error");
                        $('#btnSalvar').fadeOut(0);
                    },
                    error: function (e) {
                        swal("Usuário não foi salvo", "Erro ao tentar conectar-se ao servidor. Tente novamente.", "error");
                        $('#btnSalvar').fadeOut(0);
                    }
                });
            }
            else {
                UpScroll();
                $('#btnSalvar').fadeOut(0);
            }
        }
        function ValidarCad() {
            var valido = true;
            var cep = $("input[name='CEP']").val().trim();
            var logradouro = $("input[name='Logradouro']").val().trim();
            var numero = $("input[name='Numero']").val().trim();
            var complemento = $("input[name='Complemento']").val().trim();
            var bairro = $("input[name='Bairro']").val().trim();
            var cidade = $("input[name='Cidade']").val().trim();
            var uf = $("select[name='UF']").val().trim();

            var endCobCep = $("input[name='endCobCEP']").val().trim();
            var endCobLogradouro = $("input[name='endCobLogradouro']").val().trim();
            var endCobNumero = $("input[name='endCobNumero']").val().trim();
            var endCobComplemento = $("input[name='endCobComplemento']").val().trim();
            var endCobBairro = $("input[name='endCobBairro']").val().trim();
            var endCobCidade = $("input[name='endCobCidade']").val().trim();
            var endCobUf = $("select[name='endCobUF']").val().trim();

            var nome = $("input[name='Nome']").val().trim();
            var sobrenome = $("input[name='Sobrenome']").val().trim();
            var dataNascimento = $("input[name='DataNascimento']").val().trim();
            var cpf = $("input[name='CPF']").val().trim();
            var telefone = $("input[name='Telefone']").val().trim();

            if (nome.length <= 0 || nome.length > 40) {
                $("input[name='Nome']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='Nome']").css('border', '1px solid #e6e6e6');

            if (sobrenome.length <= 0 || sobrenome.length > 49) {
                $("input[name='Sobrenome']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='Sobrenome']").css('border', '1px solid #e6e6e6');

            if (!ValidarData(dataNascimento)) {
                $("input[name='DataNascimento']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='DataNascimento']").css('border', '1px solid #e6e6e6');

            if (!ValidarCPF(cpf)) {
                $("input[name='CPF']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='CPF']").css('border', '1px solid #e6e6e6');

            if (telefone.length < 14 || telefone.length > 15) {
                $("input[name='Telefone']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='Telefone']").css('border', '1px solid #e6e6e6');

            if (cep.length <= 0 || cep.length > 8) {
                $("input[name='CEP']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='CEP']").css('border', '1px solid #e6e6e6');

            if (logradouro.length <= 0 || logradouro.length > 100) {
                $("input[name='Logradouro']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='Logradouro']").css('border', '1px solid #e6e6e6');

            if (numero.length <= 0 || numero.length > 10) {
                $("input[name='Numero']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='Numero']").css('border', '1px solid #e6e6e6');

            if (complemento.length > 50) {
                $("input[name='Complemento']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='Complemento']").css('border', '1px solid #e6e6e6');

            if (bairro.length <= 0 || bairro.length > 45) {
                $("input[name='Bairro']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='Bairro']").css('border', '1px solid #e6e6e6');

            if (cidade.length <= 0 || cidade.length > 32) {
                $("input[name='Cidade']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='Cidade']").css('border', '1px solid #e6e6e6');

            if (uf == "0" || uf.length > 2 || uf.length <= 0) {
                $("select[name='UF']").css('border', '1px solid red');
                valido = false;
            }
            else $("select[name='UF']").css('border', '1px solid #e6e6e6');

            if (endCobCep.length <= 0 || endCobCep.length > 8) {
                $("input[name='endCobCEP']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='endCobCEP']").css('border', '1px solid #e6e6e6');

            if (endCobLogradouro.length <= 0 || endCobLogradouro.length > 100) {
                $("input[name='endCobLogradouro']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='endCobLogradouro']").css('border', '1px solid #e6e6e6');

            if (endCobNumero.length <= 0 || endCobNumero.length > 10) {
                $("input[name='endCobNumero']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='endCobNumero']").css('border', '1px solid #e6e6e6');

            if (endCobComplemento.length > 50) {
                $("input[name='endCobComplemento']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='endCobComplemento']").css('border', '1px solid #e6e6e6');

            if (endCobBairro.length <= 0 || endCobBairro.length > 45) {
                $("input[name='endCobBairro']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='endCobBairro']").css('border', '1px solid #e6e6e6');

            if (endCobCidade.length <= 0 || endCobCidade.length > 32) {
                $("input[name='endCobCidade']").css('border', '1px solid red');
                valido = false;
            }
            else $("input[name='endCobCidade']").css('border', '1px solid #e6e6e6');

            if (endCobUf == "0" || endCobUf.length > 2 || endCobUf.length <= 0) {
                $("select[name='endCobUF']").css('border', '1px solid red');
                valido = false;
            }
            else $("select[name='endCobUF']").css('border', '1px solid #e6e6e6');

            return valido;
        }
        function ValidarData(data) {
            if (data == undefined || data.length < 10)
                return false;
            var d = data.substr(0, 2);
            var m = data.substr(3, 2);
            var y = data.substr(6, 4);
            if (d > 31 || d <= 0 || m > 12 || m <= 0 || y < 1850)
                return false;
            return true;
        }
        function ValidarCPF(strCPF) {
            if (strCPF < 14)
                return false
            strCPF = strCPF.replace('.', '').replace('.', '').replace('-', '');
            var Soma;
            var Resto;
            Soma = 0;
            if (strCPF == "00000000000") return false;

            for (i = 1; i <= 9; i++) Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (11 - i);
            Resto = (Soma * 10) % 11;

            if ((Resto == 10) || (Resto == 11)) Resto = 0;
            if (Resto != parseInt(strCPF.substring(9, 10))) return false;

            Soma = 0;
            for (i = 1; i <= 10; i++) Soma = Soma + parseInt(strCPF.substring(i - 1, i)) * (12 - i);
            Resto = (Soma * 10) % 11;

            if ((Resto == 10) || (Resto == 11)) Resto = 0;
            if (Resto != parseInt(strCPF.substring(10, 11))) return false;
            return true;
        }
        function SalvarNovaSenha() {
            $('#btnSalvarNovaSenha').fadeIn(0);
            var senhaAtual = $("input[name='SenhaAtual']").val().trim();
            var novaSenha = $("input[name='NovaSenha']").val().trim();
            var repNovaSenha = $("input[name='RepNovaSenha']").val().trim();
            var valido = true;

            if (senhaAtual.length <= 0 || senhaAtual.length > 20) {
                $("input[name='SenhaAtual']").css('border', '1px solid red');
                valido = false;
            } else $("input[name='SenhaAtual']").css('border', '1px solid #e6e6e6');

            if (novaSenha.length <= 0 || novaSenha.length > 20) {
                $("input[name='NovaSenha']").css('border', '1px solid red');
                valido = false;
            } else $("input[name='NovaSenha']").css('border', '1px solid #e6e6e6');

            if (repNovaSenha.length <= 0 || repNovaSenha.length > 20) {
                $("input[name='RepNovaSenha']").css('border', '1px solid red');
                valido = false;
            } else $("input[name='RepNovaSenha']").css('border', '1px solid #e6e6e6');

            if (repNovaSenha != novaSenha) {
                $("input[name='RepNovaSenha']").css('border', '1px solid red');
                valido = false;
            } else $("input[name='RepNovaSenha']").css('border', '1px solid #e6e6e6');

            if (valido) {
                $.ajax({
                    type: 'GET',
                    url: '/Usuario/SalvarNovaSenha?senhaAtual='+senhaAtual+'&novaSenha='+novaSenha,
                    success: function (r) {
                        if (r.sucesso) {
                            $('#divSeguranca').fadeOut(0); $('#divConta').fadeIn()
                            swal("Alterações realizadas", "A nova Senha foi salva com sucesso.", "success");
                        }
                        else
                            swal("Atenção", r.mensagem, "error");
                        $('#btnSalvarNovaSenha').fadeOut(0);
                    },
                    error: function (e) {
                        swal("A nova Senha não foi salva", "Erro ao tentar conectar-se ao servidor. Tente novamente.", "error");
                        $('#btnSalvarNovaSenha').fadeOut(0);
                    }
                });
            }            
            else 
                $('#btnSalvarNovaSenha').fadeOut(0);
        } 
        var collapse1 = false, collapse2 = false;
        function EvCollapse(div) {
            if (div == 'collapse1') {
                if (collapse1) {
                    $('#collapse1').fadeOut();
                    collapse1 = false;
                }
                else {
                    $('#collapse1').fadeIn();
                    collapse1 = true;
                }
            }
            else if (div == 'collapse2') {
                if (collapse2) {
                    $('#collapse2').fadeOut();
                    collapse2 = false;
                }
                else {
                    $('#collapse2').fadeIn();
                    collapse2 = true;
                }
            }
        }
    </script>
}
