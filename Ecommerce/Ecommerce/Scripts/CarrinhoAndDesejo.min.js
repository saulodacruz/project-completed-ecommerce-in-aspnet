function OpenCar(){var e=localStorage.getItem("aioCar");if($("#titleCart").text("Seu Carrinho"),$("#aioCar").empty(),null==e)$("#aioCar").append("Carrinho vazio :("),$(".comItem").fadeOut(0);else{0==(e=JSON.parse(e)).car.length&&($("#aioCar").append("Carrinho vazio :("),$(".comItem").fadeOut(0));var a=0;e.car.forEach(function(e,o){$("#aioCar").append(`<li class="header-cart-item flex-w flex-t m-b-12">\n                    <div class="header-cart-item-img-edited">\n                    <a href="${e.url}"><img src="${e.urlImg}" width="70" style="margin-top: 5px;" alt="${e.nome}"></a>\n                    </div>\n                    <div class="header-cart-item-txt p-t-8" style="padding-top:0;width:calc(89% - 80px)">\n                        <a href="${e.url}" class="header-cart-item-name m-b-18 hov-cl1 trans-04" title="${e.nome}">\n                            ${e.nome}\n                        </a>\n                        <span class="header-cart-item-info">\n                            ${e.qtd}x R$ ${parseFloat(e.valor.toString().replace(",",".")).toFixed(2)}\n                        </span>\n                        <small>${e.obs}</small>\n                    </div>\n                    <div class="removeItemCard">\n                        <span onclick="RemoverCar(${e.cod}, '${e.obs}')" style="color:red;cursor:pointer" title="Remover">X</span>\n                    </div>\n                </li>`),a+=e.qtd*parseFloat(e.valor.replace(",","."))}),e.car.length>0?$(".comItem").fadeIn(0):$(".comItem").fadeOut(0),$("#txtCartTotal").text(-1==a.toFixed(2).indexOf(".")?a+",00":a.toFixed(2).replace(".",","))}}function LoadCar(){var e=localStorage.getItem("aioCar"),a=0;null==e?$(".btnCarrinho").attr("data-notify",a):((e=JSON.parse(e)).car.forEach(function(e,o){a+=e.qtd}),$(".btnCarrinho").attr("data-notify",a)),$(document).on("cartAio",function(){$("#cartAio").hasClass("show-header-cart")||setTimeout(function(){$("#aioCar").empty()},200)})}function AddCar(e,a,o,r,t,s,n=" ",i=!1,l=!1){null==getCookie("aiopcod")?function(){if(null!=e&&null!=a&&null!=o&&null!=r&&null!=t&&null!=s){if(r<=0)return;var i=localStorage.getItem("aioCar");if(null==i)localStorage.setItem("aioCar",JSON.stringify({offUser:!0,car:[{cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s,obs:n}]}));else{i=JSON.parse(i);var c=!1;i.car.forEach(function(a,o){a.cod!=e||a.obs!=n||c||(i.car[o].qtd+=r,localStorage.setItem("aioCar",JSON.stringify(i)),c=!0)}),c||(i.car.push({cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s,obs:n}),localStorage.setItem("aioCar",JSON.stringify(i)))}LoadCar(),l?FinalizarCompraOfCarrinho():swal(a,"Foi adicionado ao Carrinho.","success")}else swal("Atenção","Erro ao adicionar item no Carrinho. Tente novamente.","error")}():function(){if(null!=e&&null!=a&&null!=o&&null!=r&&null!=t&&null!=s){if(r<=0)return;i&&LoaderTr(!0);var c=localStorage.getItem("aioCar");if(null==c)$.ajax({type:"POST",url:"/Pedidos/AdicionarItemCarrinho",data:{item:{cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s,obs:n},update:!1},success:function(c){c.sucesso?(localStorage.setItem("aioCar",JSON.stringify({offUser:!1,car:[{cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s,obs:n}]})),LoadCar(),i?CarregarCarrinho():l?FinalizarCompraOfCarrinho():swal(a,"Foi adicionado ao Carrinho.","success")):(i&&LoaderTr(!1),swal("Atenção",c.mensagem,"error"))},error:function(e){LoadCar(),i&&LoaderTr(!1),swal("Atenção","Erro ao adicionar item no Carrinho. Tente novamente.","error")}});else{c=JSON.parse(c);var d=!1;c.car.forEach(function(o,t){o.cod!=e||o.obs!=n||d||(c.car[t].qtd+=r,$.ajax({type:"POST",url:"/Pedidos/AdicionarItemCarrinho",data:{item:c.car[t],update:!0},success:function(e){e.sucesso?(localStorage.setItem("aioCar",JSON.stringify(c)),LoadCar(),i?CarregarCarrinho():l?FinalizarCompraOfCarrinho():swal(a,"Foi adicionado ao Carrinho.","success")):(i&&LoaderTr(!1),swal("Atenção",e.mensagem,"error"))},error:function(e){LoadCar(),i&&LoaderTr(!1),swal("Atenção","Erro ao adicionar item no Carrinho. Tente novamente.","error")}}),d=!0)}),d||$.ajax({type:"POST",url:"/Pedidos/AdicionarItemCarrinho",data:{item:{cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s,obs:n},update:!1},success:function(d){d.sucesso?(c.car.push({cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s,obs:n}),localStorage.setItem("aioCar",JSON.stringify(c)),LoadCar(),i?CarregarCarrinho():l?FinalizarCompraOfCarrinho():swal(a,"Foi adicionado ao Carrinho.","success")):(i&&LoaderTr(!1),swal("Atenção",d.mensagem,"error"))},error:function(e){LoadCar(),i&&LoaderTr(!1),swal("Atenção","Erro ao adicionar item no Carrinho. Tente novamente.","error")}})}}else i&&LoaderTr(!1),swal("Atenção","Erro ao adicionar item no Carrinho. Tente novamente.","error")}()}function RemoverCar(e,a=" ",o=!1){if(null!=e&&e>0){null==getCookie("aiopcod")?(r=JSON.parse(localStorage.getItem("aioCar")),t=!1,r.car.forEach(function(o,s){o.cod!=e||o.obs!=a||t||(r.car[s].qtd-=1,0==r.car[s].qtd&&r.car.splice(s,1),0==r.car.length?localStorage.removeItem("aioCar"):localStorage.setItem("aioCar",JSON.stringify(r)),OpenCar(),LoadCar(),t=!0)})):function(){o&&LoaderTr(!0);var r=JSON.parse(localStorage.getItem("aioCar")),t=!1;r.car.forEach(function(s,n){s.cod!=e||s.obs!=a||t||($.ajax({type:"POST",url:"/Pedidos/RemoverItemCarrinho",data:{item:{cod:e,obs:a,qtd:r.car[n].qtd}},success:function(e){e.sucesso?(r.car[n].qtd-=1,r.car[n].qtd<=0&&r.car.splice(n,1),0==r.car.length?localStorage.removeItem("aioCar"):localStorage.setItem("aioCar",JSON.stringify(r)),OpenCar(),LoadCar(),o&&CarregarCarrinho()):(o&&LoaderTr(!1),swal("Atenção",e.mensagem,"error"))},error:function(e){LoadCar(),OpenCar(),o&&LoaderTr(!1),swal("Atenção","Erro ao remover o item do Carrinho. Tente novamente.","error")}}),t=!0)})}()}var r,t}function CarregarCarrinhoUsuario(){var e=localStorage.getItem("aioCar"),a=localStorage.getItem("aioDes");null!=e?(e=JSON.parse(e)).offUser?$.ajax({type:"POST",url:"/Pedidos/AtualizarCarrinho",data:{itens:e.car},success:function(e){e.sucesso&&(e.obj.forEach(function(e,a){e.valor=e.valor.toString().replace(".",",")}),localStorage.setItem("aioCar",JSON.stringify({offUser:!1,car:e.obj})),removeCookie("aioploadingUser"),CarregarListaDesejoUsuario()),LoadCar()},error:function(e){LoadCar()}}):null!=a&&CarregarListaDesejoUsuario():null!=a?CarregarListaDesejoUsuario():ObterCarrinho()}function ObterCarrinho(){$.ajax({type:"GET",url:"/Pedidos/ObterCarrinho",success:function(e){e.sucesso&&(e.obj.forEach(function(e,a){e.valor=e.valor.toString().replace(".",",")}),localStorage.setItem("aioCar",JSON.stringify({offUser:!1,car:e.obj})),ObterListaDesejo(),removeCookie("aioploadingUser")),LoadCar(),null!=localStorage.getItem("goToCart")&&(window.location.href="/Carrinho")},error:function(e){LoadCar()}})}function OpenDes(){var e=localStorage.getItem("aioDes");$("#titleCart").text("Lista de Desejos"),$(".comItem").fadeOut(0),$("#aioCar").empty(),null==e?$("#aioCar").append("Lista de desejos vazia :("):(0==(e=JSON.parse(e)).des.length&&($("#aioCar").append("Lista de desejos vazia :("),$(".comItem").fadeOut(0)),e.des.forEach(function(e,a){$("#aioCar").append('<li class="header-cart-item flex-w flex-t m-b-12">    <div class="header-cart-item-img-edited">    <a href="'+e.url+'"><img src="'+e.urlImg+'" width="70" style="margin-top: 5px;"></a>    </div>    <div class="header-cart-item-txt p-t-8" style="padding-top:0;width:calc(89% - 80px)">        <a href="'+e.url+'" class="header-cart-item-name m-b-18 hov-cl1 trans-04" style="display: initial !important;">            '+e.nome+'        </a>        <span class="header-cart-item-info">            R$ '+parseFloat(e.valor.toString().replace(",",".")).toFixed(2)+'        </span>    </div>    <div class="removeItemCard">        <span onclick="RemoverDes('+e.cod+')" style="color:red;cursor:pointer">X</span>    </div></li>')}))}function LoadDes(){var e=localStorage.getItem("aioDes"),a=0;$(".onIcon").css("opacity","0"),null==e?$(".btnDesejo").attr("data-notify",a):((e=JSON.parse(e)).des.forEach(function(e,o){a++,ActiveIconDes(e.cod,!0)}),$(".btnDesejo").attr("data-notify",a)),$(document).on("cartAio",function(){$("#cartAio").hasClass("show-header-cart")||setTimeout(function(){$("#aioCar").empty()},200)})}function AddDes(e,a,o,r,t,s){null==getCookie("aiopcod")?function(e,a,o,r,t,s){if(null!=e&&null!=a&&null!=o&&null!=r&&null!=t&&null!=s)if($(".iconDes_"+e).hasClass("desOn"))ActiveIconDes(e,!1),RemoverDes(e);else{if(ActiveIconDes(e,!0),r<=0)return;var n=localStorage.getItem("aioDes");if(null==n)localStorage.setItem("aioDes",JSON.stringify({offUser:!0,des:[{cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s}]})),swal(a,"Foi adicionado em sua lista de desejos.","success");else{var i=!1;(n=JSON.parse(n)).des.forEach(function(o,r){o.cod==e&&(i=!0,swal(a,"Já está adicionado em sua lista de desejos.","success"))}),i||(n.des.push({cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s}),localStorage.setItem("aioDes",JSON.stringify(n)),swal(a,"Foi adicionado em sua lista de desejos.","success"))}LoadDes()}else swal("Atenção","Erro ao adicionar em sua lista de desejos. Tente novamente.","error")}(e,a,o,r,t,s):function(e,a,o,r,t,s){if(null!=e&&null!=a&&null!=o&&null!=r&&null!=t&&null!=s)if($(".iconDes_"+e).hasClass("desOn"))RemoverDes(e);else{if(r<=0)return;var n=localStorage.getItem("aioDes");if(null==n)$.ajax({type:"GET",url:"/Pedidos/AdicionarItemDesejo?codProduto="+item.cod,success:function(n){n.sucesso?(ActiveIconDes(e,!0),localStorage.setItem("aioDes",JSON.stringify({offUser:!1,des:[{cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s}]})),swal(a,"Foi adicionado em sua lista de desejos.","success"),LoadDes()):swal("Atenção",n.mensagem,"error")},error:function(e){swal("Atenção","Erro ao adicionar em sua lista de desejos. Tente novamente.","error")}});else{var i=!1;(n=JSON.parse(n)).des.forEach(function(o,r){o.cod!=e||i||(swal(a,"Já está adicionado em sua lista de desejos.","success"),i=!0)}),i||$.ajax({type:"GET",url:"/Pedidos/AdicionarItemDesejo?codProduto="+e,success:function(i){i.sucesso?(n.des.push({cod:e,nome:a,valor:o,qtd:r,urlImg:t,url:s}),localStorage.setItem("aioDes",JSON.stringify(n)),swal(a,"Foi adicionado em sua lista de desejos.","success"),LoadDes()):swal("Atenção",i.mensagem,"error")},error:function(e){swal("Atenção","Erro ao adicionar em sua lista de desejos. Tente novamente.","error")}})}}else swal("Atenção","Erro ao adicionar em sua lista de desejos. Tente novamente.","error")}(e,a,o,r,t,s)}function RemoverDes(e){null==getCookie("aiopcod")?function(e){if(null!=e&&e>0){var a=JSON.parse(localStorage.getItem("aioDes"));a.des.forEach(function(o,r){o.cod==e&&(ActiveIconDes(e,!1),a.des.splice(r,1),localStorage.setItem("aioDes",JSON.stringify(a)),OpenDes(),LoadDes())})}}(e):function(e){if(null!=e&&e>0){var a=JSON.parse(localStorage.getItem("aioDes"));a.des.forEach(function(o,r){o.cod==e&&$.ajax({type:"GET",url:"/Pedidos/RemoverItemDesejo?codProduto="+e,success:function(o){o.sucesso?(ActiveIconDes(e,!1),a.des.splice(r,1),localStorage.setItem("aioDes",JSON.stringify(a)),OpenDes(),LoadDes()):swal("Atenção",o.mensagem,"error")},error:function(e){swal("Atenção","Erro ao remover o item da lista. Tente novamente.","error")}})})}}(e)}function ActiveIconDes(e,a){a?($(".iconDes_"+e).addClass("desOn"),$(".iconDes_"+e).find(".onIcon").css("opacity","1")):($(".iconDes_"+e).removeClass("desOn"),$(".iconDes_"+e).find(".onIcon").css("opacity","0"))}function CarregarListaDesejoUsuario(){var e=localStorage.getItem("aioDes");null!=e&&(e=JSON.parse(e)).offUser?$.ajax({type:"POST",url:"/Pedidos/AtualizarItensDesejo",data:{itens:e.des},success:function(e){e.sucesso&&(e.obj.forEach(function(e,a){e.valor=e.valor.toString().replace(".",",")}),localStorage.setItem("aioDes",JSON.stringify({offUser:!1,des:e.obj})),removeCookie("aioploadingUser"),null==localStorage.getItem("aioCar")&&ObterCarrinho()),LoadDes(),null!=localStorage.getItem("goToCart")&&(window.location.href="/Carrinho")},error:function(e){LoadDes()}}):ObterListaDesejo()}function ObterListaDesejo(){$.ajax({type:"GET",url:"/Pedidos/ObterItensDesejo",success:function(e){e.sucesso&&(e.obj.forEach(function(e,a){e.valor=e.valor.toString().replace(".",",")}),localStorage.setItem("aioDes",JSON.stringify({offUser:!1,des:e.obj})),removeCookie("aioploadingUser")),LoadDes(),null!=localStorage.getItem("goToCart")&&(window.location.href="/Carrinho")},error:function(e){LoadDes()}})}